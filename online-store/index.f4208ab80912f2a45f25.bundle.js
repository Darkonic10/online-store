!function(){"use strict";var e,t={638:function(e,t,i){const n=[{id:1,publisher:"Ember",description:"Charlotte Davis is in pieces. At seventeen she’s already lost more than most people lose in a lifetime. But she’s learned how to forget.",price:10,title:"GIRL IN PIECES",author:"Kathleen Glasgow",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9781101934715.jpg","https://live.staticflickr.com/65535/49886655867_a5b440205b_b.jpg"],stock_balance:25},{id:2,publisher:"Quill Tree",description:"Adam Silvera reminds us that there’s no life without death and no love without loss in this devastating yet uplifting story about two people whose lives change over the course of one unforgettable day.",price:30,title:"THEY BOTH DIE AT THE END",author:"Adam Silvera",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9780062457790.jpg","https://live.staticflickr.com/65535/49886655562_743c06a6e7_b.jpg"],stock_balance:16},{id:3,publisher:"Sourcebooks Fire",description:"When a girl disappears, who do you suspect?",price:30,title:"SHE'S GONE",author:"David Bell",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9781728254203.jpg","https://live.staticflickr.com/65535/49886343016_aa7916e7e5_b.jpg"],stock_balance:22},{id:4,publisher:"Ember",description:"A beautiful and distinguished family. A private island. A brilliant, damaged girl; a passionate, political boy. A group of four friends—the Liars—whose friendship turns destructive. A revolution. An accident. A secret.",price:20,title:"WE WERE LIARS",author:"E. Lockhart",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9780375984402.jpg","https://live.staticflickr.com/65535/49886655147_9432334b1a_b.jpg"],stock_balance:24},{id:5,publisher:"Simon & Schuster",description:"Liz Buxbaum has always known that Wes Bennett was not boyfriend material. You would think that her next-door neighbor would be a prince candidate for her romantic comedy fantasies, but Wes has only proven himself to be a pain in the butt, ever since they were little. Wes was the kid who put a frog in her Barbie Dreamhouse, the monster who hid a lawn gnome's severed head in her little homemade neighborhood book exchange.",price:20,title:"BETTER THAN THE MOVIES",author:"Lynn Painter",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9781534467637.jpg","https://live.staticflickr.com/65535/49886342726_8e817e3994_b.jpg"],stock_balance:17},{id:6,publisher:"Viz Media",description:"Revisit the Demon Slayer Corps in these novels that each contain five tales of love, friendship, and courage!",price:30,title:"DEMON SLAYER: KIMETSU NO YAIBA--THE FLOWER OF HAPPINESS",author:"Aya Yajima.",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9781974732524.jpg","https://live.staticflickr.com/65535/49886654787_8972ba4bda_b.jpg"],stock_balance:16},{id:7,publisher:"Knopf",description:"It is 1939. Nazi Germany. The country is holding its breath. Death has never been busier, and will be busier still.",price:15,title:"THE BOOK THIEF",author:"Markus Zusak",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9780375842207.jpg","https://live.staticflickr.com/65535/49886615937_3203a6585c_b.jpg","https://live.staticflickr.com/65535/49885821628_68ce79fa1c_b.jpg"],stock_balance:10},{id:8,publisher:"Margaret K. McElderry",description:"After her mother dies in an accident, sixteen-year-old Bree Matthews wants nothing to do with her family memories or childhood home.",price:10,title:"LEGENDBORN",author:"Tracy Deonn",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9781534441606.jpg","https://live.staticflickr.com/65535/49886653957_dac66b061d_b.jpg"],stock_balance:14},{id:9,publisher:"Ember",description:"The Fault in Our Stars meets Eleanor and Park in this exhilarating and heart-wrenching love story about a girl who learns to live from a boy who intends to die.",price:30,title:"ALL THE BRIGHT PLACES",author:"Jennifer Niven",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9780385755887.jpg","https://live.staticflickr.com/65535/49886340696_b8e243c961_b.jpg"],stock_balance:23},{id:10,publisher:"Square Fish",description:"Ketterdam: a bustling hub of international trade where anything can be had for the right price—and no one knows that better than criminal prodigy Kaz Brekker. Kaz is offered a chance at a deadly heist that could make him rich beyond his wildest dreams. But he can’t pull it off alone. . . ",price:15,title:"SIX OF CROWS",author:"Leigh Bardugo",genre:"Young Adult",book_image:["https://storage.googleapis.com/du-prd/books/images/9781627792127.jpg","https://live.staticflickr.com/65535/49886652717_04a7bdbf77_b.jpg"],stock_balance:22},{id:11,publisher:"Spiegel & Grau",description:"A memoir about growing up in South Africa by the comedian, now the host of “The Daily Show,” whose birth was the result of an illegal (under apartheid) relationship between a white Swiss father and a black Xhosa mother.",price:20,title:"BORN A CRIME",author:"Trevor Noah",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9780399588181.jpg","https://live.staticflickr.com/65535/49886652617_51332d233c_b.jpg"],stock_balance:20},{id:12,publisher:"HarperCollins",description:"The story, based in part on interviews, of the black women mathematicians who were hired as “computers” by the precursor of NASA during World War II. The basis of the forthcoming movie.",price:10,title:"HIDDEN FIGURES",author:"Margot Lee Shetterly",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9780062363619.jpg","https://live.staticflickr.com/65535/49886652517_deab1d2b98_b.jpg"],stock_balance:14},{id:13,publisher:"Spiegel & Grau",description:"A meditation on race in America as well as a personal story by the national correspondent of The Atlantic, framed as a letter to his teenage son. Winner of the National Book Award.",price:15,title:"BETWEEN THE WORLD AND ME",author:"Ta-Nehisi Coates",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9780679645986.jpg","https://live.staticflickr.com/65535/49885820038_34bd96fc81_b.jpg"],stock_balance:12},{id:14,publisher:"New Press",description:"A law professor takes aim at the “war on drugs” and its impact on black men.",price:10,title:"THE NEW JIM CROW",author:"Michelle Alexander",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9781595586438.jpg","https://live.staticflickr.com/65535/49886339846_27140066e9_b.jpg"],stock_balance:15},{id:15,publisher:"Spiegel & Grau",description:"A law professor and MacArthur grant recipient's memoir of his decades of work to free innocent people condemned to death.",price:25,title:"JUST MERCY",author:"Bryan Stevenson",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9780812994520.jpg","https://live.staticflickr.com/65535/49886652127_0d98c673aa_b.jpg"],stock_balance:16},{id:16,publisher:"Top Shelf Productions",description:"All three volumes of Representative John Lewis's memoir of the civil rights movement are collected here.",price:15,title:"MARCH TRILOGY",author:"John Lewis and Andrew Aydin",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9781603093958.jpg","https://live.staticflickr.com/65535/49886650782_bea57349ee_b.jpg"],stock_balance:21},{id:17,publisher:"Top Shelf Productions",description:"Representative John Lewis of Georgia describes his childhood and the beginning of his involvement in the civil rights movement. The first volume of a trilogy.",price:20,title:"MARCH: BOOK ONE",author:"John Lewis and Andrew Aydin",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9781603093002.jpg","https://live.staticflickr.com/65535/49885818103_1de957850c_b.jpg"],stock_balance:16},{id:18,publisher:"Atria / 37 INK",description:"Humorous essays on what it is like to be awkward in a world that glorifies cool.",price:15,title:"MISADVENTURES OF AWKWARD BLACK GIRL",author:"Issa Rae",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9781476749051.jpg","https://live.staticflickr.com/65535/49885817448_614d8af574_b.jpg"],stock_balance:16},{id:19,publisher:"Penguin",description:"Essays by a stand-up comic on topics like race, gender, dating and feminism.",price:15,title:"YOU CAN'T TOUCH MY HAIR",author:"Phoebe Robinson",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9780143129202.jpg","https://live.staticflickr.com/65535/49886336396_687c172d18_b.jpg"],stock_balance:20},{id:20,publisher:"Nation",description:"The Definitive History of Racist Ideas in America.",price:15,title:"STAMPED FROM THE BEGINNING",author:"Ibram X Kendi",genre:"Race and Civil Rights",book_image:["https://storage.googleapis.com/du-prd/books/images/9781568584638.jpg","https://live.staticflickr.com/65535/49885816228_8862bac007_b.jpg"],stock_balance:18},{id:21,publisher:"Harper Perennial",description:"100,000 years ago, at least six human species inhabited the earth. Today there is just one. Us. Homo sapiens.",price:15,title:"SAPIENS",author:"Yuval Noah Harari",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9780062316097.jpg","https://live.staticflickr.com/65535/49886648322_930de3e079_b.jpg"],stock_balance:23},{id:22,publisher:"Penguin",description:"A pioneering researcher and one of the world’s foremost experts on traumatic stress offers a bold new paradigm for healing.",price:10,title:"THE BODY KEEPS THE SCORE",author:"Bessel van der Kolk",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9780670785933.jpg","https://live.staticflickr.com/65535/49885815613_8cda544e01_b.jpg"],stock_balance:12},{id:23,publisher:"Picador",description:"In Being Mortal, author Atul Gawande tackles the hardest challenge of his profession: how medicine can not only improve life but also the process of its ending",price:10,title:"BEING MORTAL",author:"Atul Gawande",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9780805095159.jpg","https://live.staticflickr.com/65535/49885815368_e7f09682d8_b.jpg"],stock_balance:14},{id:24,publisher:"Farrar, Straus & Giroux",description:"In the highly anticipated Thinking, Fast and Slow, Kahneman takes us on a groundbreaking tour of the mind and explains the two systems that drive the way we think. System 1 is fast, intuitive, and emotional; System 2 is slower, more deliberative, and more logical.",price:10,title:"THINKING, FAST AND SLOW",author:"Daniel Kahneman",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9781429969352.jpg","https://live.staticflickr.com/65535/49885815118_97fdd3834a_b.jpg"],stock_balance:10},{id:25,publisher:"Dutton",description:"A pioneering and groundbreaking work of narrative nonfiction that offers a dramatic new perspective on the history of humankind, showing how through millennia, the mosquito has been the single most powerful force in determining humanity's fate",price:25,title:"THE MOSQUITO",author:"Timothy C Winegard",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9781524743413.jpg","https://live.staticflickr.com/65535/49885813873_5ac6010c5e_b.jpg"],stock_balance:21},{id:26,publisher:"Broadway",description:"Her name was Henrietta Lacks, but scientists know her as HeLa. She was a poor Southern tobacco farmer who worked the same land as her enslaved ancestors, yet her cells—taken without her knowledge—became one of the most important tools in medicine. The first “immortal” human cells grown in culture, they are still alive today, though she has been dead for more than sixty years.",price:20,title:"THE IMMORTAL LIFE OF HENRIETTA LACKS",author:"Rebecca Skloot",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9781400052189.jpg","https://live.staticflickr.com/65535/49885813568_47ffc6f3f4_b.jpg"],stock_balance:12},{id:27,publisher:"Little, Brown",description:"Beth Macy takes us into the epicenter of America's twenty-plus year struggle with opioid addiction. From distressed small communities in Central Appalachia to wealthy suburbs; from disparate cities to once-idyllic farm towns; it's a heartbreaking trajectory that illustrates how this national crisis has persisted for so long and become so firmly entrenched.",price:25,title:"DOPESICK",author:"Beth Macy",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9780316551243.jpg","https://live.staticflickr.com/65535/49886616197_504c347538_b.jpg","https://live.staticflickr.com/65535/49886303326_329595de1d_b.jpg","https://live.staticflickr.com/65535/49886645942_74b34e8151_b.jpg"],stock_balance:16},{id:28,publisher:"Scribner",description:"Neuroscientist and sleep expert Matthew Walker provides a revolutionary exploration of sleep, examining how it affects every aspect of our physical and mental well-being.",price:25,title:"WHY WE SLEEP",author:"Matthew Walker",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9781501144318.jpg","https://live.staticflickr.com/65535/49886333391_368ddc5af8_b.jpg"],stock_balance:20},{id:29,publisher:"Spiegel & Grau",description:"In Sapiens, he explored our past. In Homo Deus, he looked to our future. Now, one of the most innovative thinkers on the planet turns to the present to make sense of today's most pressing issues.",price:25,title:"21 LESSONS FOR THE 21ST CENTURY",author:"Yuval Noah Harari",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9780525512172.jpg","https://live.staticflickr.com/65535/49886645507_52148785a6_b.jpg"],stock_balance:24},{id:30,publisher:"Broadway",description:"The Power of Introverts in a World That Can't Stop Talking",price:15,title:"QUIET",author:"Susan Cain",genre:"Science",book_image:["https://storage.googleapis.com/du-prd/books/images/9780307452207.jpg","https://live.staticflickr.com/65535/49886645322_acf7175a41_b.jpg"],stock_balance:10},{id:31,publisher:"Abrams",description:"A woman travels through time — from the 1970s to the pre-Civil War era — in this adaptation of Butler’s 1979 novel.",price:15,title:"KINDRED",author:"Octavia E Butler, Damian Duffy and John Jennings",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781419709470.jpg","https://live.staticflickr.com/65535/49886332401_51ac29679d_b.jpg"],stock_balance:10},{id:32,publisher:"HarperCollins",description:"Dr. Trayaurus and Dan must prevent five powerful crystals from falling into the hands of their arch–nemesis, Denton.",price:20,title:"DANTDM: TRAYAURUS AND THE ENCHANTED CRYSTAL",author:"Dan Middleton, Doreen Mulryan and Mike Love",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780062574329.jpg","https://live.staticflickr.com/65535/49885811648_8a8396e4c6_b.jpg"],stock_balance:10},{id:33,publisher:"DC Comics",description:"This critically acclaimed story from 1988 offers a possible origin for the Joker.",price:30,title:"BATMAN: THE KILLING JOKE",author:"Alan Moore and Brian Bolland",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781401216672.jpg","https://live.staticflickr.com/65535/49886331776_288df84790_b.jpg"],stock_balance:21},{id:34,publisher:"Candlewick",description:"The story of Snow White is reimagined here as a noir tale set in Manhattan during the Great Depression.",price:15,title:"SNOW WHITE",author:"Matt Phelan",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780763672331.jpg","https://live.staticflickr.com/65535/49886616372_faebef06e5_b.jpg"],stock_balance:10},{id:35,publisher:"Houghton Mifflin Harcourt",description:"This collection features contributions from Chris Ware, Cece Bell and others.",price:25,title:"THE BEST AMERICAN COMICS 2016",author:"edited  Roz Chast and Bill Kartalopoulos",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780544750357.jpg","https://live.staticflickr.com/65535/49885810933_346248643c_b.jpg"],stock_balance:14},{id:36,publisher:"Abrams",description:"The Texas Revolution is the latest subject in this nonfiction series.",price:15,title:"NATHAN HALE’S HAZARDOUS TALES: ALAMO ALL–STARS",author:"Nathan Hale",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781419719028.jpg","https://live.staticflickr.com/65535/49886642687_de5e691dcd_b.jpg"],stock_balance:21},{id:37,publisher:"Drawn & Quarterly",description:"The author travels with a team of journalists as they interview civilians and refugees from various war zones.",price:20,title:"ROLLING BLACKOUTS: DISPATCHES FROM TURKEY, SYRIA AND IRAQ",author:"Sarah Glidden",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781770462557.jpg","https://live.staticflickr.com/65535/49885794963_bd451f4893_b.jpg"],stock_balance:20},{id:38,publisher:"Disney-Lucasfilm",description:"A new adaptation of the first three movies.",price:30,title:"STAR WARS: THE ORIGINAL TRILOGY",author:"the staff of the Lucas Film Book Group",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781484737842.jpg","https://live.staticflickr.com/65535/49885782528_185b57d813_b.jpg","https://live.staticflickr.com/65535/49885793668_a620b4c7cf_b.jpg"],stock_balance:18},{id:39,publisher:"Little, Brown",description:'In the tradition of "One Thousand and One Nights," this book depicts a variety of tales and myths centered on female storytellers in an imaginary world.',price:30,title:"ONE HUNDRED NIGHTS OF HERO",author:"Isabel Greenberg",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780316259170.jpg","https://live.staticflickr.com/65535/49886626507_93b32c995d_b.jpg"],stock_balance:20},{id:40,publisher:"Dark Horse",description:"In this sequel to Palahniuk’s 1996 novel, Tyler Durden re-emerges to create mayhem once again.",price:10,title:"FIGHT CLUB 2",author:"Chuck Palahniuk and Cameron Stewart",genre:"Hardcover Graphic Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781616559458.jpg","https://live.staticflickr.com/65535/49885793013_081d884d35_b.jpg"],stock_balance:24},{id:41,publisher:"Back Bay/Little, Brown",description:"Why some people succeed — it has to do with luck and opportunities as well as talent.",price:15,title:"OUTLIERS",author:"Malcolm Gladwell",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780316017930.jpg","https://live.staticflickr.com/65535/49886312736_c4fe6e522b_b.jpg"],stock_balance:17},{id:42,publisher:"Farrar, Straus & Giroux",description:"In a thrilling, enchanted world, he’ll learn to go from “I just can’t” to “Yes, I can!”",price:20,title:"Now I Know How!",author:"Demetra Yuvanu",genre:"Hardcover Graphic Books",book_image:["https://live.staticflickr.com/65535/49885792113_d9b4bd6bf1_b.jpg","https://live.staticflickr.com/65535/49885811213_ee00145900_b.jpg"],stock_balance:11},{id:43,publisher:"Simon & Schuster",description:"A biography of the entrepreneur, based on 40 interviews with Jobs conducted over two years.",price:25,title:"STEVE JOBS",author:"Walter Isaacson",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781451648553.jpg","https://live.staticflickr.com/65535/49886624947_66f53dd118_b.jpg"],stock_balance:20},{id:44,publisher:"Wiley",description:"How to increase your business’s Web site profits.",price:20,title:"CONVERT EVERY CLICK",author:"Benji Rabhan",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781118759677.jpg","https://live.staticflickr.com/65535/49886624702_49309dc328_b.jpg"],stock_balance:16},{id:45,publisher:"Back Bay/Little Brown",description:"How and why certain products and ideas become fads.",price:25,title:"TIPPING POINT",author:"Malcolm Gladwell",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780759574731.jpg","https://live.staticflickr.com/65535/49885791603_78ca2b4d93_b.jpg"],stock_balance:16},{id:46,publisher:"Anchor",description:"A veteran of the hotel industry offers an inside look at the not-always-savory tricks of the trade.",price:25,title:"HEADS IN BEDS",author:"Jacob Tomsky",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780385535649.jpg","https://live.staticflickr.com/65535/49886624282_95bb7ee27a_b.jpg"],stock_balance:25},{id:47,publisher:"Riverhead",description:"A look at what truly motivates us, and how we can use that knowledge to work smarter and live better.",price:20,title:"DRIVE",author:"Daniel H Pink",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9781594484803.jpg","https://live.staticflickr.com/65535/49886623757_96ae495657_b.jpg"],stock_balance:16},{id:48,publisher:"Harper Perennial",description:"A maverick scholar and a journalist apply economic theory to everything from cheating sumo wrestlers to the falling crime rate.",price:15,title:"FREAKONOMICS",author:"Steven D Levitt and Stephen J Dubner",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780061234002.jpg","https://live.staticflickr.com/65535/49886308121_40110f39de_b.jpg"],stock_balance:23},{id:49,publisher:"Picador",description:"A simple way to manage complexity.",price:30,title:"THE CHECKLIST MANIFESTO",author:"Atul Gawande",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780805091748.jpg","https://live.staticflickr.com/65535/49886620762_e4a2835de3_b.jpg"],stock_balance:19},{id:50,publisher:"Crown Business",description:"How political and economic institutions lead to economic success or failure.",price:15,title:"WHY NATIONS FAIL",author:"Daron Acemoglu and James A Robinson",genre:"Paperback Business Books",book_image:["https://storage.googleapis.com/du-prd/books/images/9780307719232.jpg","https://live.staticflickr.com/65535/49886302821_844733091f_b.jpg","https://live.staticflickr.com/65535/49886307411_d54bf37ea4_b.jpg"],stock_balance:14}],o="mainOptions";function a(e,t,i){const n=e.querySelector(i);if(!n)throw new Error(`Selector ${i} didn't match any elements.`);if(!(n instanceof t))throw new TypeError(`Selector ${i} have wrong type`);return n}function s(e,t){const i=e.getItem(t);return i||"totalPrice"!==t?i||"{}":"0"}function r(e){return new Map(Object.entries(JSON.parse(s(localStorage,e))))}let c=new Map;function l(){c=new Map(Object.entries(JSON.parse(s(localStorage,o))))}function d(){const e=JSON.stringify(Object.fromEntries(c));localStorage.setItem(o,e)}function p(e){for(const t of n)if(t.id===e)return t;throw new Error("No such ID")}function m(e,t,i,n){const o=document.createElement(e);if(o.className=t,n&&(o.textContent=n),!(o instanceof i))throw new TypeError(`Selector ${e} have wrong type`);return o}const h=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,style:"currency",currency:"USD"});function u(){if(d(),0===c.size)return"#main-page";const e=[];return c.forEach(((t,i)=>{e.push(`${i}=${t}`)})),`#main-page?${e.join("&")}`}var g=class{constructor(e){this.container=document.createElement("div"),this.container.id=e}createHeaderTitle(e){const t=document.createElement("h1");return t.innerText=e,t}render(){return this.container}},b=i(344),k=i.n(b);const _="↕",f=/[ &/.,-]/g,v=[{name:"Choose sort",id:"none"},{name:"Title, Asc",id:"titleAsc"},{name:"Title, Desc",id:"titleDesc"},{name:"Author, Asc",id:"authorAsc"},{name:"Author, Desc",id:"authorDesc"},{name:"Price, Asc",id:"priceAsc"},{name:"Price, Desc",id:"priceDesc"}];var E=class extends g{constructor(e){if(super(e),this.sort=v[0].id,this.genre=[],this.publisher=[],this.minPrice=0,this.maxPrice=0,this.minStock=0,this.maxStock=0,this.searchWords=[],this.searchString="",this.chosenBooks=[...n],c){const e=c.get("sort");if(e)switch(this.sort=e,this.sort){case v[1].id:this.chosenBooks.sort(((e,t)=>e.title.toLowerCase()>t.title.toLowerCase()?1:-1));break;case v[2].id:this.chosenBooks.sort(((e,t)=>e.title.toLowerCase()<t.title.toLowerCase()?1:-1));break;case v[3].id:this.chosenBooks.sort(((e,t)=>e.author.toLowerCase()>t.author.toLowerCase()?1:-1));break;case v[4].id:this.chosenBooks.sort(((e,t)=>e.author.toLowerCase()<t.author.toLowerCase()?1:-1));break;case v[5].id:this.chosenBooks.sort(((e,t)=>e.price-t.price));break;case v[6].id:this.chosenBooks.sort(((e,t)=>t.price-e.price))}const t=c.get("genre");t&&(this.genre=t.split(_),this.chosenBooks=this.chosenBooks.filter((e=>this.genre.includes(e.genre.replace(/ /g,"")))));const i=c.get("publisher");i&&(this.publisher=i.split(_),this.chosenBooks=this.chosenBooks.filter((e=>this.publisher.includes(e.publisher.replace(f,"")))));const n=c.get("minPrice");n&&(this.minPrice=parseInt(n),this.chosenBooks=this.chosenBooks.filter((e=>e.price>=this.minPrice)));const o=c.get("maxPrice");o&&(this.maxPrice=parseInt(o),this.chosenBooks=this.chosenBooks.filter((e=>e.price<=this.maxPrice)));const a=c.get("minStock");a&&(this.minStock=parseInt(a),this.chosenBooks=this.chosenBooks.filter((e=>e.stock_balance>=this.minStock)));const s=c.get("maxStock");s&&(this.maxStock=parseInt(s),this.chosenBooks=this.chosenBooks.filter((e=>e.stock_balance<=this.maxStock)));const r=c.get("search");if(r){this.searchString=r,this.searchWords=r.toLowerCase().split(" ").filter((e=>e));const e=[];for(let t=0;t<this.chosenBooks.length;t++){const i=this.chosenBooks[t];let n=!0,o=0;const a=`${i.author} ${i.description} ${i.genre} ${i.price} ${i.publisher} ${i.stock_balance} ${i.title}`.toLowerCase();for(;n&&o<this.searchWords.length;)a.includes(this.searchWords[o])||(n=!1),o++;n&&e.push(i.id)}this.chosenBooks=this.chosenBooks.filter((t=>e.includes(t.id)))}}this.filters=new class{constructor(e,t,i,n,o,a,s,r){this.sort=e,this.genre=t,this.publisher=i,this.minPriceOpt=n,this.maxPriceOpt=o,this.minStockOpt=a,this.maxStockOpt=s,this.searchString=r}renderFilters(){const e=document.createElement("section");e.className="filters";const t=m("div","container filters__container",HTMLDivElement),i=m("div","filters__wrapper",HTMLDivElement),o=m("div","filters__genre",HTMLDivElement),s=m("h3","filters__genre-title",HTMLHeadingElement,"Genre"),r=m("div","filters__publisher",HTMLDivElement),l=m("h3","filters__publishers-title",HTMLHeadingElement,"Publisher"),p=m("div","filters__sliders",HTMLDivElement),h=m("div","filters__price",HTMLDivElement),g=m("h3","filters__price-title",HTMLHeadingElement,"Price"),b=m("div","filters__price-minmax",HTMLDivElement),E=m("p","filters__price-min",HTMLParagraphElement,"0"),T=m("p","filters__price-max",HTMLParagraphElement,"0"),w=m("div","slider-price",HTMLDivElement),S=m("div","filters__stock",HTMLDivElement),x=m("h3","filters__stock-title",HTMLHeadingElement,"Stock"),N=m("div","filters__stock-minmax",HTMLDivElement),y=m("p","filters__stock-min",HTMLParagraphElement,"0"),L=m("p","filters__stock-max",HTMLParagraphElement,"0"),C=m("div","slider-stock",HTMLDivElement),A=m("div","filters__wrapper",HTMLDivElement),j=m("select","sort",HTMLSelectElement),H=m("button","filters__filter-reset",HTMLButtonElement,"Reset Filters"),M=m("button","filters__filter-copy",HTMLButtonElement,"Copy link"),O=m("div","filters__search",HTMLDivElement),I=m("form","filters__search-form",HTMLFormElement),B=m("input","filters__search-input",HTMLInputElement);B.type="text",B.placeholder="Search for books by keyword",this.searchString&&(B.value=this.searchString);const P=m("input","filters__search-submit",HTMLInputElement);P.type="submit",P.value="",e.appendChild(t),t.appendChild(i),i.appendChild(o),o.appendChild(s),i.appendChild(r),r.appendChild(l),i.appendChild(p),p.appendChild(h),h.appendChild(g),h.appendChild(b),b.appendChild(E),b.appendChild(T),h.appendChild(w),p.appendChild(S),S.appendChild(x),S.appendChild(N),N.appendChild(y),N.appendChild(L),S.appendChild(C),t.appendChild(A),A.appendChild(j),A.appendChild(H),A.appendChild(M),t.appendChild(O),O.appendChild(I),I.appendChild(B),I.appendChild(P);for(let e=0;e<v.length;e++){const t=v[e],i=new Option(t.name,t.id);t.id===this.sort&&(i.selected=!0),j.appendChild(i)}M.onclick=function(){const e=window.location.href;navigator.clipboard.writeText(e).then((function(){console.log("URL copied!")}),(function(){console.log("URL copy error")}))},H.onclick=function(){c=new Map,d(),window.location.hash=u()};const R=document.createElement("ul");R.className="filters__genre-list";const D=document.createElement("ul");D.className="filters__publisher-list";const $=[],G=[],W=[],Y=[];for(const e of n){if(W.push(e.price),Y.push(e.stock_balance),!$.includes(e.genre)){$.push(e.genre);const t=document.createElement("li"),i=document.createElement("input"),n=document.createElement("label");t.className="filters__genre-item",t.append(i,n),i.type="checkbox",i.id=e.genre.replace(/ /g,""),n.innerText=`${e.genre}`,n.setAttribute("for",e.genre.replace(/ /g,"")),R.append(t),this.genre.includes(i.id)&&(i.checked=!0),t.addEventListener("change",(()=>{i.checked?this.genre.push(i.id):this.genre=this.genre.filter((e=>e!==i.id)),0!==this.genre.length?c.set("genre",this.genre.join(_)):c.delete("genre"),window.location.hash=u()}))}if(!G.includes(e.publisher)){G.push(e.publisher);const t=document.createElement("li"),i=document.createElement("input"),n=document.createElement("label");t.className="filters__publisher-item",t.append(i,n),i.type="checkbox",i.id=e.publisher.replace(f,""),n.innerText=`${e.publisher}`,n.setAttribute("for",e.publisher.replace(f,"")),D.append(t),this.publisher.includes(i.id)&&(i.checked=!0),i.addEventListener("click",(()=>{i.checked?this.publisher.push(i.id):this.publisher=this.publisher.filter((e=>e!==i.id)),0!==this.publisher.length?c.set("publisher",this.publisher.join(_)):c.delete("publisher"),window.location.hash=u()}))}}o.append(R),r.append(D);const U=Math.min(...W),F=Math.max(...W),K=this.minPriceOpt?this.minPriceOpt:U,J=this.maxPriceOpt?this.maxPriceOpt:F;E.innerText=String(K),T.innerText=String(J),k().create(w,{start:[K,J],connect:!0,range:{min:U,max:F},margin:1,step:1});const z=a(w,HTMLDivElement,".noUi-handle-lower"),V=a(w,HTMLDivElement,".noUi-handle-upper");w.addEventListener("click",(()=>{const e=z.ariaValueNow?+z.ariaValueNow.slice(0,-2):U,t=V.ariaValueNow?+V.ariaValueNow.slice(0,-2):F;e===U?c.delete("minPrice"):c.set("minPrice",e.toString()),t===F?c.delete("maxPrice"):c.set("maxPrice",t.toString()),window.location.hash=u()}));const q=Math.min(...Y),Q=Math.max(...Y),X=this.minStockOpt?this.minStockOpt:q,Z=this.maxStockOpt?this.maxStockOpt:Q;y.innerText=String(X),L.innerText=String(Z),k().create(C,{start:[X,Z],connect:!0,range:{min:q,max:Q},margin:1,step:1});const ee=a(C,HTMLDivElement,".noUi-handle-lower"),te=a(C,HTMLDivElement,".noUi-handle-upper");return C.addEventListener("click",(()=>{const e=ee.ariaValueNow?+ee.ariaValueNow.slice(0,-2):q,t=te.ariaValueNow?+te.ariaValueNow.slice(0,-2):Q;e===q?c.delete("minStock"):c.set("minStock",e.toString()),t===Q?c.delete("maxStock"):c.set("maxStock",t.toString()),window.location.hash=u()})),j.addEventListener("change",(()=>{console.log("Chosen sort option: ",j.value),j.value===v[0].id?c.delete("sort"):c.set("sort",j.value),d(),window.location.hash=u()})),I.addEventListener("submit",(function(){const e=B.value;0===e.length?c.delete("search"):e.length<3?alert("At least 3 symbols!"):(c.set("search",e),window.location.hash=u())})),e}}(this.sort,this.genre,this.publisher,this.minPrice,this.maxPrice,this.minStock,this.maxStock,this.searchString),this.content=new class{renderContent(e){const t=document.createElement("div");t.className="main-div";const i=document.createElement("div");i.className="container main__container",t.appendChild(i);const n=r("basketIds");let o=0,s=0;for(const e of n)s+=e[1],o+=p(+e[0]).price*e[1];let c=h.format(o);const l=a(document,HTMLSpanElement,".header__counter-span");l.innerText=`${s}`;const d=a(document,HTMLSpanElement,".header__price-value");d.innerText=`${c}`;for(const t of e){const e=document.createElement("div");e.className="main__book-card",e.id=`id-book-${t.id}`;const a=document.createElement("img");a.className="main__book-img",a.src=t.book_image[0],a.alt=`Image of the book ${t.title}`;const r=document.createElement("div");r.className="main__book-info";const m=document.createElement("p");m.innerText=`${t.title}`,m.className="main__book-title";const u=document.createElement("p");u.innerText=`Genre: ${t.genre}`;const g=document.createElement("p");g.innerText=`Author: ${t.author}`;const b=document.createElement("p");b.innerText=`Price: $${t.price}`;const k=document.createElement("p");k.innerText=`Stock: ${t.stock_balance}`;const _=document.createElement("div");_.className="main__book-buttons";const f=document.createElement("button");f.className="button main__button-add",n.has(t.id.toString())?f.innerText="Remove":f.innerText="Add";const v=document.createElement("button");v.className="button main__button-detail",v.innerText="Detail",_.addEventListener("click",(e=>{if(e.target===f){n.has(t.id.toString())?(n.delete(t.id.toString()),f.innerText="Add"):(n.set(t.id.toString(),1),f.innerText="Remove"),o=0,s=0;for(const e of n)s+=e[1],o+=p(+e[0]).price*e[1];c=h.format(o),localStorage.setItem("basketIds",JSON.stringify(Object.fromEntries(n))),l.innerText=`${s}`,d.innerText=`${c}`}e.target===v&&(console.log(`Selected book id: ${t.id}`),window.location.hash=`#book-page?id=${t.id}`)})),_.append(f,v),r.append(m,u,g,b,k),e.append(a,r,_),i.append(e)}return t}}}createMain(){const e=this.filters.renderFilters();this.container.appendChild(e);const t=this.content.renderContent(this.chosenBooks);return this.container.append(t),this.container}render(){return this.createMain()}},T=i.p+"7f27866c63c8e3a1f764.webp",w=i.p+"89f5a5e253dcce610b22.svg",S=i.p+"57e21f21c487e248eebc.svg",x=i.p+"1d5af4942ab6c647e112.svg";class N extends g{constructor(e,t,i){super(e),this.itemsPage=t,this.page=i}createMain(){const e=this.createHeaderTitle(N.TextObject.MainTitle),t=document.createElement("div");t.className="basket",t.innerHTML='\n    <div class="container basket__container">\n      <div class="basket__products">\n        <div class="basket__head">\n          <h2 class="basket__head-title">Products in Card</h2>\n          <div class="basket__head-controls">\n            <div class="basket__items-limit">\n              <p>Items: </p>\n              <input class="basket__pages-input" type="number" min="1" value="3">\n            </div>\n            <div class="basket__page-numbers">\n              <p>Page: </p>\n              <button class="basket__page-prev"><</button>\n              <span class="basket__page-curr">1</span>\n              <button class="basket__page-next">></button>\n            </div>\n          </div>\n        </div>\n        <div class="basket__items"></div>\n      </div>\n      <div class="basket__summary">\n        <h2>Summary</h2>\n      </div>\n    </div>\n    ';const i=a(t,HTMLDivElement,".basket__items"),n=r("basketIds");let o=0,s=0;const c=document.createElement("h1");c.innerText="The basket is empty",c.className="basket__empty",0===n.size?this.container.append(c):this.container.append(e,t);const l=a(t,HTMLInputElement,".basket__pages-input"),d=a(t,HTMLButtonElement,".basket__page-prev"),m=a(t,HTMLSpanElement,".basket__page-curr"),u=a(t,HTMLButtonElement,".basket__page-next");l.value=String(this.itemsPage),m.innerText=String(this.page);let g=1;const b=(e,t)=>{g=Math.ceil(+n.size/e);const o=e*(t-1);t*e<=+n.size||(e=+n.size%e);let a=0;const s=o+e;for(const e of n){if(a>=o&&a<s){const t=p(+e[0]),s=document.createElement("div");s.className=`basket__item item-${a+1}`;const r=document.createElement("div");r.className="basket__item-number",r.innerText=String(a+1);const d=document.createElement("div");d.className="basket__item-info";const u=document.createElement("img");u.className="basket__item-img",u.src=t.book_image[0];const k=document.createElement("div");k.className="basket__item-detail";const _=document.createElement("h3");_.innerText=t.title;const f=document.createElement("p");f.innerText=t.description,k.append(_,f),d.append(u,k),d.addEventListener("click",(()=>{window.location.hash=`#book-page?id=${t.id}`}));const v=document.createElement("div");v.className="basket__item-control";const E=document.createElement("div");E.className="basket__item-stock";const T=document.createElement("span");T.className="basket__stock-value",T.innerText=`Stock: ${String(t.stock_balance)}`;const w=document.createElement("div");w.className="basket__item-number-div";const S=document.createElement("button");S.className="basket__item-add",S.innerText="+";const x=document.createElement("span");x.className="basket__item-quantity",x.innerText=String(e[1]);const N=document.createElement("button");N.className="basket__item-delete",N.innerText="-";const y=document.createElement("div");y.className="basket__item-price";const L=document.createElement("span");L.className="basket__price-value",L.innerText=`${String(h.format(t.price*e[1]))}`,E.append(T),w.append(N,x,S),y.append(L),v.append(E,w,y),s.append(r,d,v),i.append(s),s.addEventListener("click",(r=>{r.target===S&&+x.innerText+1<=t.stock_balance&&(x.innerText=String(+x.innerText+1),L.innerText=`${String(h.format(t.price*+x.innerText))}`,n.set(e[0],+x.innerText),localStorage.setItem("basketIds",JSON.stringify(Object.fromEntries(n)))),r.target===N&&(+x.innerText>1?(x.innerText=String(+x.innerText-1),L.innerText=`${String(h.format(t.price*+x.innerText))}`,n.set(e[0],+x.innerText),localStorage.setItem("basketIds",JSON.stringify(Object.fromEntries(n)))):(s.remove(),n.delete(e[0]),localStorage.setItem("basketIds",JSON.stringify(Object.fromEntries(n))),i.replaceChildren(),a-1===o?(m.innerText=String(+m.innerText-1),history.pushState(null,"",`#basket-page?limit=${l.value}&page=${m.innerText}`),g-=1,b(+l.value,g)):b(+l.value,+m.innerText),0===n.size&&(this.container.replaceChildren(),this.container.append(c)))),r.target!==S&&r.target!==N||R()}))}a++}};b(this.itemsPage,this.page);const k=a(t,HTMLDivElement,".basket__summary"),_=document.createElement("p");_.className="basket__items-count",_.innerText=`Products: ${s}`;const f=document.createElement("p");f.className="basket__items-total",f.innerText=`Total: ${h.format(o)}`;const v=document.createElement("input");v.className="basket__promo",v.type="text",v.placeholder="Enter promo code";const E=document.createElement("span");E.innerText="Promo for test: 'RS', 'EPM'";const y=document.createElement("button");y.className="basket__buy-button",y.innerText="BUY NOW",k.append(_,f);const L=document.createElement("div");L.className="basket__promo-result";const C=document.createElement("span");C.className="basket__promo-info";const A=document.createElement("button");A.className="basket__promo-add",A.innerText="ADD";const j=r("promo");function H(){"RS"!==v.value.toUpperCase()||j.has("RS")||(C.innerText="Rolling Scopes School - 10%",L.append(C,A),v.after(L)),"EPM"!==v.value.toUpperCase()||j.has("EPM")||(C.innerText="EPAM Systems - 10%",L.append(C,A),v.after(L))}v.addEventListener("input",(()=>{L.remove(),H()}));let M=1;function O(){M=1;for(const e of j.values())M-=e}O();const I=document.createElement("p");I.className="basket__price-promo",I.innerText=`Total: ${h.format(o*M)}`;const B=document.createElement("div");B.className="basket__apply-promo";const P=document.createElement("h3");function R(){o=0,s=0;for(const e of n)s+=e[1],o+=p(+e[0]).price*e[1];_.innerText=`Products: ${s}`,f.innerText=`Total: ${h.format(o)}`,O(),I.innerText=`Total: ${h.format(o*M)}`}P.innerText="Applied codes",B.append(P),R(),j.size?(f.after(I,B),f.classList.add("old-price")):(I.remove(),B.remove());for(const e of j){const t=document.createElement("div");t.className="basket__applied-promo";const i=document.createElement("span"),n=document.createElement("button");n.innerText="DROP","RS"===e[0]&&(i.innerText="Rolling Scopes School - 10% - ",B.append(t),t.append(i,n)),"EPM"===e[0]&&(i.innerText="EPAM Systems - 10% - ",B.append(t),t.append(i,n)),n.addEventListener("click",(()=>{j.delete(e[0]),localStorage.setItem("promo",JSON.stringify(Object.fromEntries(j))),t.remove(),H(),O(),I.innerText=`Total: ${h.format(o*M)}`,0===j.size&&(B.remove(),I.remove(),f.classList.remove("old-price"))}))}A.addEventListener("click",(()=>{L.remove(),I.remove(),B.remove(),f.classList.add("old-price"),f.after(I,B);const e=document.createElement("span"),t=document.createElement("div");t.className="basket__applied-promo";const i=document.createElement("button");i.innerText="DROP","RS"===v.value.toUpperCase()&&(j.set("RS",.1),e.innerText="Rolling Scopes School - 10% - ",B.append(t),t.append(e,i),localStorage.setItem("promo",JSON.stringify(Object.fromEntries(j)))),"EPM"===v.value.toUpperCase()&&(j.set("EPM",.1),e.innerText="EPAM Systems - 10% - ",B.append(t),t.append(e,i),localStorage.setItem("promo",JSON.stringify(Object.fromEntries(j)))),O(),I.innerText=`Total: ${h.format(o*M)}`,i.addEventListener("click",(()=>{"Rolling Scopes School - 10% - "===e.innerText?j.delete("RS"):"EPAM Systems - 10% - "===e.innerText&&j.delete("EPM"),localStorage.setItem("promo",JSON.stringify(Object.fromEntries(j))),t.remove(),H(),O(),I.innerText=`Total: ${h.format(o*M)}`,0===j.size&&(I.remove(),B.remove(),f.classList.remove("old-price"))}))})),k.append(v,E,y),l.addEventListener("input",(()=>{+l.value>0&&(g=Math.ceil(+n.size/+l.value),+m.innerText>g&&(m.innerText=String(g)),history.pushState(null,"",`#basket-page?limit=${l.value}&page=${m.innerText}`),i.replaceChildren(),b(+l.value,+m.innerText))})),d.addEventListener("click",(()=>{+m.innerText-1>=1&&(m.innerText=String(+m.innerText-1),history.pushState(null,"",`#basket-page?limit=${l.value}&page=${m.innerText}`),i.replaceChildren(),b(+l.value,+m.innerText))})),u.addEventListener("click",(()=>{+m.innerText+1<=g&&(m.innerText=String(+m.innerText+1),history.pushState(null,"",`#basket-page?limit=${l.value}&page=${m.innerText}`),i.replaceChildren(),b(+l.value,+m.innerText))}));const D=document.createElement("div");D.className="modal__container";const $=document.createElement("div");$.className="modal__content",D.append($);const G=document.createElement("form");G.className="modal__content-form";const W=document.createElement("div");W.className="modal__detail";const Y=document.createElement("h2");Y.innerText="Personal details",Y.className="modal__detail-head";const U=document.createElement("div");U.className="modal__div-name";const F=document.createElement("div");F.className="modal__div-phone";const K=document.createElement("div");K.className="modal__div-address";const J=document.createElement("div");J.className="modal__div-emailDiv";const z=document.createElement("input");z.type="text",z.placeholder="Name",z.className="input modal__input-name";const V=document.createElement("input");V.type="tel",V.placeholder="Phone number",V.min="9",V.className="input modal__input-phone";const q=document.createElement("input");q.type="text",q.placeholder="Delivery address",q.className="input modal__input-address";const Q=document.createElement("input");Q.type="email",Q.placeholder="E-mail",Q.className="input modal__input-email";const X=document.createElement("div");X.className="modal__card-details";const Z=document.createElement("h2");Z.innerText="Credit card details",Z.className="modal__card-head";const ee=document.createElement("div");ee.className="modal__card-data";const te=document.createElement("div");te.className="modal__card-number";const ie=document.createElement("div");ie.className="modal__card-img";const ne=document.createElement("input");ne.type="number",ne.placeholder="Card number",ne.className="modal__card-input-number";const oe=document.createElement("div");oe.className="modal__card-other";const ae=document.createElement("div");ae.className="modal__other-valid";const se=document.createElement("span");se.innerText="VALID:",se.className="modal__valid-text";const re=document.createElement("input");re.type="text",re.placeholder="Valid date",re.className="modal__valid-input";const ce=document.createElement("div");ce.className="modal__other-cvv";const le=document.createElement("span");le.innerText="CVV:",le.className="modal__cvv-text";const de=document.createElement("input");de.type="number",de.placeholder="Code",de.className="modal__cvv-input",U.append(z),F.append(V),K.append(q),J.append(Q),W.append(Y,U,F,K,J),te.append(ie,ne),ae.append(se,re),ce.append(le,de),oe.append(ae,ce),ee.append(te,oe),X.append(Z,ee);const pe=document.createElement("button");pe.innerText="CONFIRM",pe.className="modal__confirm",G.append(W,X,pe),$.append(G),y.addEventListener("click",(()=>{this.container.append(D)})),D.addEventListener("click",(e=>{e.target===D&&D.remove()}));const me=document.createElement("span");me.innerText="error";const he=document.createElement("span");he.innerText="error";const ue=document.createElement("span");ue.innerText="error";const ge=document.createElement("span");ge.innerText="error";const be=document.createElement("span");be.innerText="Card number - error";const ke=document.createElement("span");ke.innerText="Card date - error";const _e=document.createElement("span");function fe(){const e=z.value,t=/^[a-z\s]+$/i.test(e),i=e.split(" "),n=i.every((e=>e.length>=3)),o=t&&i.length>=2&&n;return o?me.remove():U.append(me),o}function ve(){const e=/^[+]\d{9,}/.test(V.value);return e?he.remove():F.append(he),e}function Ee(){const e=q.value,t=/^[a-z\s]+$/i.test(e),i=e.split(" "),n=i.every((e=>e.length>=5)),o=t&&i.length>=3&&n;return o?ue.remove():K.append(ue),o}function Te(){const e=/^\w[\w-.]*@[\w-]+\.[a-z]{2,4}$/i.test(Q.value);return e?ge.remove():J.append(ge),e}let we;function Se(){const e=/^[245]\d{15}\b/.test(ne.value);return e?be.remove():X.append(be),e}function xe(){const e=/(0[1-9]|1[012])\/(0[1-9]|[12][0-9]|3[01])/.test(re.value);return e?ke.remove():X.append(ke),e}function Ne(){const e=/\b\d{3}\b/i.test(de.value);return e?_e.remove():X.append(_e),e}_e.innerText="Card cvv - error",z.addEventListener("blur",(()=>{fe()})),V.addEventListener("blur",(()=>{ve()})),q.addEventListener("blur",(()=>{Ee()})),Q.addEventListener("blur",(()=>{Te()})),function(e){e[e.Mir=2]="Mir",e[e.Visa=4]="Visa",e[e.Mastercard=5]="Mastercard"}(we||(we={})),ne.addEventListener("input",(()=>{const e=we[+ne.value[0]];ie.style.backgroundImage="Mir"===e?`url("${w}")`:"Visa"===e?`url("${S}")`:"Mastercard"===e?`url("${x}")`:`url("${T}")`})),ne.addEventListener("blur",(()=>{Se()})),re.addEventListener("input",(()=>{re.value=re.value.replace(/[^\d|/]/g,""),+(re.value[0]+re.value[1])>12&&(re.value=re.value.replace(re.value[0]+re.value[1],"12")),2!==re.value.length||re.value.includes("/")||(re.value=re.value+"/"),re.value.length>5&&(re.value=re.value.slice(0,5))})),re.addEventListener("blur",(()=>{xe()})),de.addEventListener("blur",(()=>{Ne()}));const ye=document.createElement("h1");return ye.innerText="Your order has been completed. You will be redirected to the main page in 3 seconds.",pe.addEventListener("click",(()=>{fe(),ve(),Ee(),Te(),Se(),xe(),Ne(),fe()&&ve()&&Ee()&&Te()&&Se()&&xe()&&Ne()&&(this.container.replaceChildren(),this.container.append(ye),setTimeout((()=>{n.clear(),localStorage.setItem("basketIds",JSON.stringify(Object.fromEntries(n))),window.location.href="#main-page"}),3e3))})),this.container}render(){return this.createMain()}}N.TextObject={MainTitle:"BasketPage"};var y=N;class L extends g{constructor(e,t){super(e),this.chosenBookID=t}render(){const e=document.createElement("div");e.className="main-div";const t=this.createHeaderTitle(L.TextObject.MainTitle),i=p(this.chosenBookID),n=m("div","path",HTMLDivElement),o=m("a","links",HTMLAnchorElement,i.publisher);o.href=`#main-page?publisher=${i.publisher.replace(f,"")}`;const a=m("a","links",HTMLAnchorElement,i.genre);a.href=`#main-page?genre=${i.genre.replace(/ /g,"")}`;const s=m("a","links",HTMLAnchorElement,i.author);s.href=`#main-page?search=${i.author.toUpperCase()}`;const r=m("a","links",HTMLAnchorElement,i.title);r.href=`#main-page?search=${i.title.toUpperCase()}`;const c=document.createElement("div");c.className="container main__container main__container_start";const l=document.createElement("div");l.className="book_mini-img-container";const d=document.createElement("div"),u=document.createElement("img");u.className="book__big-img",u.src=i.book_image[0];const g=document.createElement("div");g.className="book__desc";const b=document.createElement("div");b.className="book__buttons";const k=document.createElement("h2");k.innerText=i.title;const _=document.createElement("h3");_.innerText=i.author;const v=document.createElement("p");v.innerText=i.description;const E=document.createElement("p");E.innerText=`Genre: ${i.genre}`;const T=document.createElement("p");T.innerText=`Publisher: ${i.publisher}`;const w=document.createElement("p");w.innerText=`Stock: ${i.stock_balance.toString()}`;const S=document.createElement("h1");S.innerText=`${h.format(i.price)}`;const x=document.createElement("button");x.className="button main__button-add",x.textContent="Add to cart";const N=document.createElement("button");N.className="button basket__buy-button",N.textContent="Buy Now",this.container.append(e),e.appendChild(t),e.appendChild(n),n.appendChild(o),n.innerHTML+=" >> ",n.appendChild(a),n.innerHTML+=" >> ",n.appendChild(s),n.innerHTML+=" >> ",n.appendChild(r),d.appendChild(u),c.appendChild(l),c.appendChild(d),c.appendChild(g),g.appendChild(k),g.appendChild(_),g.appendChild(v),g.appendChild(E),g.appendChild(T),g.appendChild(w),c.appendChild(b),b.appendChild(S),b.appendChild(x),b.appendChild(N),e.append(c);for(let e=0;e<i.book_image.length;e++){const t=i.book_image[e],n=document.createElement("img");n.className="book__mini-img",n.src=t,l.appendChild(n),n.addEventListener("click",(()=>{u.src=n.src}))}return this.container}}L.TextObject={MainTitle:"BookPage"};var C=L;class A extends g{constructor(e,t){super(e),this.errorType=t}render(){const e=document.createElement("div");e.className="main";const t=this.createHeaderTitle(A.TextObject[this.errorType]);return t.className="main__container main__container_center",e.appendChild(t),this.container.append(e),this.container}}A.TextObject={404:"Error! The page was not found."};var j=A;class H{static renderNewPage(e,t){const i=document.querySelector(`#${this.defaultPageID}`);i&&i.remove();let o=null;if("main-page"===e)t&&0!==t.size||0===c.size?t&&(c.clear(),t.forEach(((e,t)=>{c.set(t,e)}))):window.location.hash=u(),o=new E(e);else if("basket-page"===e)if(t&&0!==t.size){const i=t.get("limit"),n=t.get("page");o=void 0!==i&&void 0!==n?new y(e,+i,+n):void 0!==i&&void 0===n?new y(e,+i,1):void 0===i&&void 0!==n?new y(e,3,+n):void 0===i&&void 0===n?new y(e,3,1):new j(e,404)}else o=new y(e,3,1);else if("book-page"===e)if(t){const i=function(e){const t=e.get("id");if("string"==typeof t){const e=parseInt(t);if(n.some((t=>t.id===e)))return e}return-1}(t);o=i>0?new C(e,i):new j(e,404)}else o=new j(e,404);else o=new j(e,404);if(o){const e=o.render();e.id=this.defaultPageID,this.container.append(e)}}changedHash(){function e(){const e=window.location.hash,t=function(e){if(!e)return"main-page";const t=e.indexOf("?");return t<0?e.slice(1):e.slice(1,t)}(e),i=function(e){const t=new Map,i=e.split("&");for(let e=0;e<i.length;e++){const n=i[e].split("=");2===n.length&&t.set(n[0],n[1])}return t}(decodeURIComponent(e.slice(e.indexOf("?")+1)));e?e.indexOf("/")>=0?H.renderNewPage("error-page"):H.renderNewPage(t,i):H.renderNewPage("main-page")}window.addEventListener("hashchange",e),window.addEventListener("load",e)}run(){window.addEventListener("beforeunload",d),window.addEventListener("load",l),this.changedHash()}}H.container=a(document,HTMLElement,"main"),H.defaultPageID="current-page",(new H).run()}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var a=i[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.m=t,e=[],n.O=function(t,i,o,a){if(!i){var s=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],a=e[d][2];for(var r=!0,c=0;c<i.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(r=!1,a<s&&(s=a));if(r){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,o,a]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={826:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,s=i[0],r=i[1],c=i[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(c)var d=c(n)}for(t&&t(i);l<s.length;l++)a=s[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},i=self.webpackChunk=self.webpackChunk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var o=n.O(void 0,[344],(function(){return n(638)}));o=n.O(o)}();
//# sourceMappingURL=index.f4208ab80912f2a45f25.bundle.js.map